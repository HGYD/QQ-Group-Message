QQGroup使用文档

                                                         撰稿人：zhang
                                                      版  本：1.0
                                                             时  间：2015年8月



第一部分 命令启动

格式一：

python groupmessage.py

命令解释：
    正常启动程序( 账户首次登陆时，这个命令等同于格式三的命令)。

格式二：

python groupmessage.py 1

命令解释：
    正常启动程序，并更新群组中成员列表信息。

格式三：

python groupmessage.py 2

命令解释：
    正常启动程序，并更新群组中成员列表信息，和成员详细信息列表。


命令执行后，在当前文件夹下，会生成v.jpg文件，是登陆验证的二维码，在15s内扫描该二维码，即可完成登陆。

第二部分 数据获取

注：这个部分的使用说明将使用一个具体的使用实例




使用QQ账号1958317603登陆，执行完成后，当前文件夹下会生成一个名为1958317603的用户专属文件夹。

1 获取该用户的群列表




在程序执行完成后，在1958317603文件夹下的文件夹及文件如上图2.1（每个群，会生成一个相应的文件夹，注：该账号只有俩个群）。

群列表信息记录在文件GroupList.txt中 。

文件的格式说明：

每个群的相关信息被记录成一行
每行有8个字段，以空格作为分隔符

表2.1 字段说明
字段一	群名字
字段二	记录临时的gid，qq服务器端产生的临时号码，获取相关信息时使用
字段三	记录临时的gcode，qq服务器端产生的临时号码，获取相关信息时使用
字段四	群的真实群号，初始为0 （暂时未用）
字段五	已经记录的群消息数目，初始为零
字段六	群的成员列表信息文件存储路径
字段七	成员详细信息文件存储路径
字段八	消息文件存储路径 


2 获取该用户的某个群的成员列表

文件位置：参考表2.1的字段六

文件格式说明：
  #第一行 群的基本信息
（json格式，字段名称为英文，这里不做过多说明）
  #第二行 更新时间
  #第三行 人数  
  #第四行开始，是每个成员的真实qq（获取失败 为0 ）和 相关基本信息
（json格式，字段名称为英文，这里不做过多说明） 

注：每次信息更新，并不将历史信息记录删除，而是以追加方式写入文件


3 获取该用户的某个群的成员的详细信息

文件位置：参考表2.1的字段七

文件格式说明：

每个成员详细信息即为一行
每行包含三个字段

表2.2 字段说明
字段一	该成员真实qq号
字段二	记录该条记录的时间
字段三	详细信息
（json格式，字段名称为英文，这里不做过多说明） 


注：每次信息更新，并不将历史信息记录删除，而是以追加方式写入文件

4 获取该用户的某个群的接收消息

文件位置：参考表2.1的字段八

文件格式说明：

每条消息记录即为一行
每行包含两个字段


表2.3字段说明
字段一	消息信息
（json格式，字段名称为英文，这里不做过多说明，有些字段，意义未知） 
特殊字段说明：
send-uin 为发送消息者的uin
（qq服务器端产生的变化id，可以用来获取真实qq号码）
info_seq 为真实的群号码
字段二	发送该条信息者的真实qq号


第三部分 程序局限性说明

Get消息，json返回，容易出现异常错误，但该错误并不会导致程序退出。

受制于webqq，相关信息获取过程，容易出错。

发送的相关加密数据，计算方法会常常更新。

不能长时间的qq在线，24-48h便会被迫下线。

webqq不支持接收离线、匿名的消息，文件，图片，和自己在其他客户端发送的消息。


注：程序的运行的记录，会在log.log日志中记录，包括程序运行的进度和各种异常消息。
